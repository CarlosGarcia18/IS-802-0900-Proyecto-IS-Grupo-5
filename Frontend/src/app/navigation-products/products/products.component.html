<!--Componente para mostrar los productos y los filtro de los mismos-->

<div class="container1">
    <h1>¡Bienvenido!</h1>
</div>
<div class="container3">
    <h4 class="h4-class">Productos</h4>
    <div class="select-container">
            <form [formGroup]="filterForm" action="POST">
            <H5>Filtrar por: </H5>
            
            <!--(change)="filtrar()"-->
            
            <select [(ngModel)]="filtro.fk_id_department"  class="selector" (change)="filtrar()"
                name="Departamento" formControlName="ubicacion" >

                <option value="">Ubicación</option>

                <!-- Traer departamentos de la base de datos-->
                <option *ngFor="let department of departments" [value]="department.id_department">
                    {{department.var_name}}
                </option>
                
            </select>
            
        
            <select [(ngModel)]="filtro.dou_price" class="selector" (change)="filtrar()"  name="precio" formControlName="precio">
                <option value="">Precio menor a:</option>
                <option value="100">100</option>
                <option value="500">500</option>
                <option value="1000">1000</option>
                <option value="2000">2000</option>
                <option value="5000">5000</option>

            </select>
            
        
            <select [(ngModel)]="filtro.fk_id_product_category"  class="selector" (change)="filtrar()"  name="Categoria" formControlName="categoria">
                <option value="">Categoría</option>

                <!-- Traer las categorias de la base de datos-->
                <option *ngFor="let category of categories" [value]="category.id_product_category">
                    {{category.var_name}}
                </option>
                
            </select>
            
            <div class="btn-suscribe-container" *ngIf="enableSubscription">
                <button class="btn-suscribe" type="submit" (click)="suscribirse()" *ngIf="!subscribed">SUSCRIBIRME</button> 
                <button class="btn-unsubscribe" type="submit" (click)="suscribirse()" *ngIf="subscribed">ANULAR SUSCRIPCIÓN</button> 
            </div>   
            </form>
    </div> 
       
</div>

    

<div  class="carousel-container" >
    <div  class="gallery" >
        
        <div class="content" *ngFor="let item of lista | slice:desde:hasta" >
            <img [src] = "'http://localhost:3000/' + item.var_name_photo" alt="">
            <table>
                <tr>
                    <td><h3>{{item.var_name}}</h3></td>
                    <td class="icon-col"><i id="fav-icon" class="fa-solid fa-heart"></i></td>
                </tr>
            </table>    
            <h6>L.{{item.dou_price}}</h6>
            <button class="buy">Ver</button>
        </div>

    </div>
    
</div>

<mat-paginator [length]="lista.length"
              [pageSize]="pageSize"
              (page)="cambiarPagina($event)"
              >
</mat-paginator>